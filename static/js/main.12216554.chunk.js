(this.webpackJsonpmuzak_new=this.webpackJsonpmuzak_new||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(28),c=n.n(a),o=n(9),i=n(10),l=n(0),u=function(){return Object(l.jsxs)("section",{className:"error_view",children:[Object(l.jsx)(o.a,{icon:i.a}),Object(l.jsxs)("p",{children:[Object(l.jsxs)("span",{className:"opps",children:["Opps!",Object(l.jsx)("br",{})]}),Object(l.jsxs)("span",{children:["Something went wrong.",Object(l.jsx)("br",{}),"Please try again."]})]})]})},d=n(12),j=n.n(d),b=n(13),h=n(4),p=n(14),g=n.n(p),v=n(11),f=n.n(v),O=Object({NODE_ENV:"production",PUBLIC_URL:"/muzak_new",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APISecret:"",REACT_APP_APIKey:""}).REACT_APP_APIKeyDiscogs,x=Object({NODE_ENV:"production",PUBLIC_URL:"/muzak_new",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APISecret:"",REACT_APP_APIKey:""}).REACT_APP_APISecretSpotify,m=Object(r.createContext)({}),w=function(){return Object(r.useContext)(m)},S=function(e){var t=e.children,n=Object(r.useState)([]),s=Object(h.a)(n,2),a=s[0],c=s[1],o=Object(r.useState)([]),i=Object(h.a)(o,2),u=i[0],d=i[1],p=Object(r.useState)({}),v=Object(h.a)(p,2),w=v[0],S=v[1],_=Object(r.useState)({}),y=Object(h.a)(_,2),k=y[0],T=y[1],P=Object(r.useState)(""),A=Object(h.a)(P,2),C=A[0],E=A[1],N=Object(r.useState)(!1),R=Object(h.a)(N,2),D=R[0],I=R[1],W=Object(r.useState)(!1),V=Object(h.a)(W,2),z=V[0],B=V[1],M=Object(r.useState)(!1),F=Object(h.a)(M,2),K=F[0],U=F[1],L=Object(r.useState)(!1),H=Object(h.a)(L,2),q=H[0],J=H[1],X=Object(r.useState)(!1),Y=Object(h.a)(X,2),$=Y[0],G=Y[1],Q=Object(r.useState)(null),Z=Object(h.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(r.useState)(!0),re=Object(h.a)(ne,2),se=re[0],ae=re[1],ce=Object(r.useState)(!1),oe=Object(h.a)(ce,2),ie=oe[0],le=oe[1],ue=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+x},"https://accounts.spotify.com/api/token","grant_type=client_credentials",e.prev=4,e.next=7,g.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",{headers:t});case 7:n=e.sent,E(n.data.access_token),le(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),le(!0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+C},s=(r={url:"https://api.spotify.com/v1/search?",q:t,type:"artist"}).url+"q="+r.q+"&type="+r.type,f.a.isEmpty(C)){e.next=19;break}return e.prev=5,e.next=8,g.a.get(s,{headers:n});case 8:a=e.sent,c(a.data.artists.items),le(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),le(!0),console.error(e.t0);case 17:e.next=20;break;case 19:console.log("problem with token for search");case 20:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,s,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+C},"https://api.spotify.com/v1/artists/",r="https://api.spotify.com/v1/artists/"+t+"/top-tracks?market=US",f.a.isEmpty(C)||"none"===t){e.next=21;break}return e.prev=5,e.next=8,g.a.get(r,{headers:n});case 8:s=e.sent,a=s.data.tracks,c=a.filter((function(e){return!f.a.isEmpty(null===e||void 0===e?void 0:e.preview_url)})),d(c),le(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),le(!0),console.error(e.t0);case 19:e.next=22;break;case 21:console.log("problem with token for songs");case 22:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.discogs.com/artists/",n="https://api.discogs.com/artists/"+t,e.prev=2,e.next=5,g.a.get(n);case 5:r=e.sent,S(r.data),le(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),le(!0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),he={songs:u,artistDetails:w,currentSong:k,totalArtists:a,togglePlayer:D,toggleSearchResults:z,toggleProfile:K,toggleSearchResultsView:q,toggleSidebar:$,songIndex:ee,displayNoTracksMessage:se,showErrorView:ie,getAuth:ue,getArtist:de,getSongs:je,getArtistDiscogs:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.discogs.com/database/search?",n="https://api.discogs.com/database/search?"+("q="+t+"&type=artist&token="+O),e.prev=3,e.next=6,g.a.get(n);case 6:r=e.sent,s=null===r||void 0===r?void 0:r.data.results[0].id,be(s.toString()),le(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),le(!0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),setCurrentSong:T,setTogglePlayer:I,setToggleSearchResults:B,setToggleProfile:U,setToggleSearchResultsView:J,setTotalArtists:c,setToggleSidebar:G,setSongIndex:te,setDisplayNoTracksMessage:ae,setShowErrorView:le};return Object(l.jsx)(m.Provider,{value:he,children:t})},_=function(){var e=w(),t=e.setToggleProfile,n=e.setToggleSidebar;return Object(l.jsx)("div",{className:"info",children:Object(l.jsx)(o.a,{type:"button",icon:i.b,onClick:function(){return n(!0),void t(!0)}})})},y=function(){var e=w().currentSong;return Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"Muzak"}),Object(l.jsxs)("p",{children:["Listen to available preview tracks from your favorite artists using ",Object(l.jsx)("a",{href:"https://www.spotify.com",target:"_blank",rel:"noopener noreferrer",children:"Spotify"})," and artist information from ",Object(l.jsx)("a",{href:"https://www.discogs.com/",target:"_blank",rel:"noopener noreferrer",children:"Discogs"}),"."]}),Object(l.jsx)(_,{}),Object(l.jsx)("audio",{id:"music",src:null===e||void 0===e?void 0:e.preview_url})]})},k=function(e){var t=e.children,n=w(),a=n.getAuth,c=n.showErrorView;return Object(r.useEffect)((function(){a()}),[a]),Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(y,{}),t,c&&Object(l.jsx)(u,{})]})},T=n(65),P=n(66),A=n(67),C=function(){var e=w(),t=e.getArtist,n=e.setToggleSearchResultsView,s=e.setDisplayNoTracksMessage,a=e.displayNoTracksMessage,c=e.setShowErrorView,o=Object(r.useState)(""),i=Object(h.a)(o,2),u=i[0],d=i[1];return Object(l.jsxs)(T.a,{id:"search_form",children:[Object(l.jsx)(P.a,{placeholder:"Search for something?!","aria-label":"SearchBar","aria-describedby":"search",onChange:function(e){return function(e){c(!1);var t=e.target.value;d(t)}(e)}}),Object(l.jsx)(T.a.Append,{children:Object(l.jsx)(A.a,{type:"submit",id:"submit",onClick:function(){a&&s(!1),t(u),n(!0)},children:"Search"})})]})},E=function(){var e=(new Date).getFullYear();return Object(l.jsx)("footer",{children:Object(l.jsxs)("small",{children:["\xa9",e,Object(l.jsx)("a",{href:"http://www.meinnovation.net",target:"_blank",rel:"noopener noreferrer",children:"ME Innovation"})]})})},N=function(){var e,t,n,a=w(),c=a.currentSong,u=a.setTogglePlayer,d=a.setToggleSidebar,j=a.songs,b=a.songIndex,p=a.setSongIndex,g=a.setCurrentSong,v=document.getElementById("music"),f=Object(r.useState)("pause"),O=Object(h.a)(f,2),x=O[0],m=O[1],S=Object(r.useState)(!1),_=Object(h.a)(S,2),y=_[0],k=_[1];Object(r.useEffect)((function(){null===v||void 0===v||v.setAttribute("src",null===c||void 0===c?void 0:c.preview_url)}),[v,c]);return Object(l.jsx)("div",{className:"audioPlayer_container",children:Object(l.jsxs)("div",{id:"audioPlayer",children:[Object(l.jsx)("img",{className:"album_art",src:null===c||void 0===c||null===(e=c.album)||void 0===e||null===(t=e.images[0])||void 0===t?void 0:t.url,alt:""}),Object(l.jsx)("div",{id:"song_name_display",children:y?"Something went wrong. Please try again.":Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("p",{className:"artist_name",children:null===c||void 0===c?void 0:c.name}),Object(l.jsx)("p",{className:"album",children:null===c||void 0===c||null===(n=c.album)||void 0===n?void 0:n.name})]})}),Object(l.jsx)("div",{id:"controls_wrap",children:Object(l.jsxs)("div",{id:"audio_controls",children:[Object(l.jsx)(o.a,{icon:i.f,id:"previous_song",role:"button",className:"previous_song"===x?"active_player_button":"",onClick:function(){return function(e){m(e);var t=b-1,n=j&&j[t];g(n),p(t)}("previous_song")}}),Object(l.jsx)(o.a,{icon:i.d,id:"play",role:"button",className:"play"===x?"active_player_button":"",onClick:function(){return m("play"),k(!v),void(null===v||void 0===v||v.play())}}),Object(l.jsx)(o.a,{icon:i.c,id:"pause",role:"button",className:"pause"===x?"active_player_button":"",onClick:function(){return m("pause"),void(null===v||void 0===v||v.pause())}}),Object(l.jsx)(o.a,{icon:i.g,id:"next_song",role:"button",className:"next_song"===x?"active_player_button":"",onClick:function(){return function(e){m(e);var t=b+1,n=j&&j[t];g(n),p(t)}("next_song")}})]})}),Object(l.jsx)("button",{id:"mobile_back",onClick:function(){d(!1),u(!1)},children:Object(l.jsx)("p",{children:"Back to results"})})]})})},R=function(){var e=w(),t=e.artistDetails,n=e.setToggleProfile,r=e.setToggleSidebar;return Object(l.jsxs)("div",{id:"artist_info",children:[Object(l.jsx)("div",{className:"close",children:Object(l.jsx)(A.a,{onClick:function(){return r(!1),void n(!1)},children:"X"})}),Object(l.jsx)("div",{className:"content",children:f.a.isEmpty(t)?"Nothing to see here until you search for something":Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("h3",{children:null===t||void 0===t?void 0:t.name}),Object(l.jsx)("p",{children:null===t||void 0===t?void 0:t.profile}),Object(l.jsx)("a",{href:null===t||void 0===t?void 0:t.uri,target:"_blank",rel:"noreferrer",children:"Check out the rest of the "+(null===t||void 0===t?void 0:t.name)+" profile from Discogs"})]})})]})},D=function(){var e=w(),t=e.togglePlayer,n=e.toggleProfile,r=e.toggleSidebar,s=e.currentSong,a=e.displayNoTracksMessage,c=e.setDisplayNoTracksMessage;return Object(l.jsxs)("aside",{id:"album_player_section",className:r?"":"hidden",children:[(null===s||void 0===s?void 0:s.preview_url)?t&&Object(l.jsx)(N,{}):Object(l.jsxs)("div",{className:"no_tracks"+(a?"":" hidden"),children:[Object(l.jsx)("div",{className:"close",children:Object(l.jsx)(A.a,{onClick:function(){c(!1)},children:"X"})}),"Sorry can't find preview tracks available for this artist right now. Please try again, check out their profile or select a new artist."]}),n&&Object(l.jsx)(R,{})]})},I=function(){var e=w(),t=e.totalArtists,n=e.getSongs,r=e.getArtistDiscogs,s=e.setToggleSearchResultsView,a=e.songs,c=e.setToggleSearchResults,o=e.setTogglePlayer;return Object(l.jsxs)("div",{id:"search_results",children:[Object(l.jsx)("h2",{children:"Search Results"}),Object(l.jsx)("p",{children:"Please choose an option from the following:"}),Object(l.jsx)("ul",{children:f.a.isEmpty(t)?"Sorry there was a problem. Please try again":null===t||void 0===t?void 0:t.map((function(e,t){return Object(l.jsx)("li",{className:"result",onClick:function(){return t=null===e||void 0===e?void 0:e.name,i=null===e||void 0===e?void 0:e.id,o(!1),n(i).then(r(t)),!f.a.isEmpty(a)&&c(!0),void s(!1);var t,i},children:null===e||void 0===e?void 0:e.name},t)}))})]})},W=n(62),V=n(63),z=function(e){var t=e.songData,n=e.index,r=w(),s=r.setCurrentSong,a=r.setTogglePlayer,c=r.setToggleSidebar,u=r.setSongIndex,d=r.setDisplayNoTracksMessage;return Object(l.jsxs)(W.a,{as:"li",className:"tracks",children:[Object(l.jsx)(V.a,{xs:8,xl:11,children:null===t||void 0===t?void 0:t.name}),Object(l.jsx)(V.a,{className:"d-flex flex-row-reverse",children:Object(l.jsx)("button",{onClick:function(){s(t),c(!0),u(n),d(!0),a(!0)},id:"play_buttons",children:Object(l.jsx)(o.a,{icon:i.e})})})]})},B=function(e){var t=e.songs;return Object(l.jsx)("div",{id:"song_list",children:Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("h2",{children:"Top Songs"}),Object(l.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(l.jsx)(z,{songData:e,index:t},t)}))})]})})},M=function(){var e=w(),t=e.songs,n=e.toggleSearchResultsView;return Object(l.jsxs)("section",{className:"searchContainer",children:[n&&Object(l.jsx)(I,{}),!f.a.isEmpty(t)&&Object(l.jsx)(B,{songs:t||[]})]})},F=n(64),K=function(){return Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(S,{children:Object(l.jsx)(F.a,{fluid:!0,children:Object(l.jsxs)(W.a,{id:"content_wrap",children:[Object(l.jsx)(V.a,{xs:12,md:7,lg:7,xl:7,children:Object(l.jsxs)(k,{children:[Object(l.jsx)(C,{}),Object(l.jsx)(M,{})]})}),Object(l.jsx)(V.a,{className:"sidebar_container",xs:12,md:5,lg:5,xl:5,children:Object(l.jsx)(D,{})}),Object(l.jsx)(E,{})]})})})})},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(60);c.a.render(Object(l.jsx)(K,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/muzak_new",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/muzak_new","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):L(t,e)}))}}()}},[[61,1,2]]]);
//# sourceMappingURL=main.12216554.chunk.js.map