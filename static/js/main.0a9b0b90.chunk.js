(this.webpackJsonpmuzak_new=this.webpackJsonpmuzak_new||[]).push([[0],{60:function(e,t,r){},61:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),a=r(28),c=r.n(a),i=r(9),o=r(10),l=r(0),u=function(){return Object(l.jsxs)("section",{className:"error_view",children:[Object(l.jsx)(i.a,{icon:o.a}),Object(l.jsxs)("p",{children:[Object(l.jsxs)("span",{className:"opps",children:["Opps!",Object(l.jsx)("br",{})]}),Object(l.jsxs)("span",{children:["Something went wrong.",Object(l.jsx)("br",{}),"Please try again."]})]})]})},d=r(12),j=r.n(d),b=r(13),h=r(4),p=r(14),g=r.n(p),v=r(11),x=r.n(v),O=Object(n.createContext)({}),f=function(){return Object(n.useContext)(O)},m=function(e){var t=e.children,r=Object(n.useState)([]),s=Object(h.a)(r,2),a=s[0],c=s[1],i=Object(n.useState)([]),o=Object(h.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)({}),v=Object(h.a)(p,2),f=v[0],m=v[1],y=Object(n.useState)({}),w=Object(h.a)(y,2),k=w[0],S=w[1],_=Object(n.useState)(""),N=Object(h.a)(_,2),T=N[0],C=N[1],P=Object(n.useState)(!1),E=Object(h.a)(P,2),A=E[0],D=E[1],I=Object(n.useState)(!1),M=Object(h.a)(I,2),V=M[0],B=M[1],R=Object(n.useState)(!1),z=Object(h.a)(R,2),F=z[0],q=z[1],J=Object(n.useState)(!1),X=Object(h.a)(J,2),H=X[0],L=X[1],K=Object(n.useState)(!1),Q=Object(h.a)(K,2),U=Q[0],Y=Q[1],G=Object(n.useState)(null),W=Object(h.a)(G,2),Z=W[0],$=W[1],ee=Object(n.useState)(!0),te=Object(h.a)(ee,2),re=te[0],ne=te[1],se=Object(n.useState)(!1),ae=Object(h.a)(se,2),ce=ae[0],ie=ae[1],oe=function(){var e=Object(b.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Basic ",t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "},"https://accounts.spotify.com/api/token","grant_type=client_credentials",e.prev=4,e.next=7,g.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",{headers:t});case 7:r=e.sent,C(r.data.access_token),ie(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),ie(!0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(j.a.mark((function e(t){var r,n,s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+T},s=(n={url:"https://api.spotify.com/v1/search?",q:t,type:"artist"}).url+"q="+n.q+"&type="+n.type,x.a.isEmpty(T)){e.next=19;break}return e.prev=5,e.next=8,g.a.get(s,{headers:r});case 8:a=e.sent,c(a.data.artists.items),ie(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),ie(!0),console.error(e.t0);case 17:e.next=20;break;case 19:console.log("problem with token for search");case 20:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(j.a.mark((function e(t){var r,n,s,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+T},"https://api.spotify.com/v1/artists/",n="https://api.spotify.com/v1/artists/"+t+"/top-tracks?market=US",x.a.isEmpty(T)||"none"===t){e.next=21;break}return e.prev=5,e.next=8,g.a.get(n,{headers:r});case 8:s=e.sent,a=s.data.tracks,c=a.filter((function(e){return!x.a.isEmpty(null===e||void 0===e?void 0:e.preview_url)})),d(c),ie(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),ie(!0),console.error(e.t0);case 19:e.next=22;break;case 21:console.log("problem with token for songs");case 22:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.discogs.com/artists/",r="https://api.discogs.com/artists/"+t,e.prev=2,e.next=5,g.a.get(r);case 5:n=e.sent,m(n.data),ie(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),ie(!0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),je={songs:u,artistDetails:f,currentSong:k,totalArtists:a,togglePlayer:A,toggleSearchResults:V,toggleProfile:F,toggleSearchResultsView:H,toggleSidebar:U,songIndex:Z,displayNoTracksMessage:re,showErrorView:ce,getAuth:oe,getArtist:le,getSongs:ue,getArtistDiscogs:function(){var e=Object(b.a)(j.a.mark((function e(t){var r,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.discogs.com/database/search?",r="https://api.discogs.com/database/search?"+("q="+t+"&type=artist&token=HXVjrLeEQhrviqTAitfJKDfwIvBMFImseaHzNnyI"),e.prev=3,e.next=6,g.a.get(r);case 6:n=e.sent,s=null===n||void 0===n?void 0:n.data.results[0].id,de(s.toString()),ie(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),ie(!0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),setCurrentSong:S,setTogglePlayer:D,setToggleSearchResults:B,setToggleProfile:q,setToggleSearchResultsView:L,setTotalArtists:c,setToggleSidebar:Y,setSongIndex:$,setDisplayNoTracksMessage:ne,setShowErrorView:ie};return Object(l.jsx)(O.Provider,{value:je,children:t})},y=function(){var e=f(),t=e.setToggleProfile,r=e.setToggleSidebar;return Object(l.jsx)("div",{className:"info",children:Object(l.jsx)(i.a,{type:"button",icon:o.b,onClick:function(){return r(!0),void t(!0)}})})},w=function(){var e=f().currentSong;return Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"Muzak"}),Object(l.jsxs)("p",{children:["Listen to available preview tracks from your favorite artists using ",Object(l.jsx)("a",{href:"https://www.spotify.com",target:"_blank",rel:"noopener noreferrer",children:"Spotify"})," and artist information from ",Object(l.jsx)("a",{href:"https://www.discogs.com/",target:"_blank",rel:"noopener noreferrer",children:"Discogs"}),"."]}),Object(l.jsx)(y,{}),Object(l.jsx)("audio",{id:"music",src:null===e||void 0===e?void 0:e.preview_url})]})},k=function(e){var t=e.children,r=f(),a=r.getAuth,c=r.showErrorView;return Object(n.useEffect)((function(){a()}),[a]),Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(w,{}),t,c&&Object(l.jsx)(u,{})]})},S=r(65),_=r(66),N=r(67),T=function(){var e=f(),t=e.getArtist,r=e.setToggleSearchResultsView,s=e.setDisplayNoTracksMessage,a=e.displayNoTracksMessage,c=e.setShowErrorView,i=Object(n.useState)(""),o=Object(h.a)(i,2),u=o[0],d=o[1];return Object(l.jsxs)(S.a,{id:"search_form",children:[Object(l.jsx)(_.a,{placeholder:"Search for something?!","aria-label":"SearchBar","aria-describedby":"search",onChange:function(e){return function(e){c(!1);var t=e.target.value;d(t)}(e)}}),Object(l.jsx)(S.a.Append,{children:Object(l.jsx)(N.a,{type:"submit",id:"submit",onClick:function(){a&&s(!1),t(u),r(!0)},children:"Search"})})]})},C=function(){var e=(new Date).getFullYear();return Object(l.jsx)("footer",{children:Object(l.jsxs)("small",{children:["\xa9",e,Object(l.jsx)("a",{href:"http://www.meinnovation.net",target:"_blank",rel:"noopener noreferrer",children:"ME Innovation"})]})})},P=function(){var e,t,r,a=f(),c=a.currentSong,u=a.setTogglePlayer,d=a.setToggleSidebar,j=a.songs,b=a.songIndex,p=a.setSongIndex,g=a.setCurrentSong,v=document.getElementById("music"),x=Object(n.useState)("pause"),O=Object(h.a)(x,2),m=O[0],y=O[1],w=Object(n.useState)(!1),k=Object(h.a)(w,2),S=k[0],_=k[1];Object(n.useEffect)((function(){null===v||void 0===v||v.setAttribute("src",null===c||void 0===c?void 0:c.preview_url)}),[v,c]);return Object(l.jsx)("div",{className:"audioPlayer_container",children:Object(l.jsxs)("div",{id:"audioPlayer",children:[Object(l.jsx)("img",{className:"album_art",src:null===c||void 0===c||null===(e=c.album)||void 0===e||null===(t=e.images[0])||void 0===t?void 0:t.url,alt:""}),Object(l.jsx)("div",{id:"song_name_display",children:S?"Something went wrong. Please try again.":Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("p",{className:"artist_name",children:null===c||void 0===c?void 0:c.name}),Object(l.jsx)("p",{className:"album",children:null===c||void 0===c||null===(r=c.album)||void 0===r?void 0:r.name})]})}),Object(l.jsx)("div",{id:"controls_wrap",children:Object(l.jsxs)("div",{id:"audio_controls",children:[Object(l.jsx)(i.a,{icon:o.f,id:"previous_song",role:"button",className:"previous_song"===m?"active_player_button":"",onClick:function(){return function(e){y(e);var t=b-1,r=j&&j[t];g(r),p(t)}("previous_song")}}),Object(l.jsx)(i.a,{icon:o.d,id:"play",role:"button",className:"play"===m?"active_player_button":"",onClick:function(){return y("play"),_(!v),void(null===v||void 0===v||v.play())}}),Object(l.jsx)(i.a,{icon:o.c,id:"pause",role:"button",className:"pause"===m?"active_player_button":"",onClick:function(){return y("pause"),void(null===v||void 0===v||v.pause())}}),Object(l.jsx)(i.a,{icon:o.g,id:"next_song",role:"button",className:"next_song"===m?"active_player_button":"",onClick:function(){return function(e){y(e);var t=b+1,r=j&&j[t];g(r),p(t)}("next_song")}})]})}),Object(l.jsx)("button",{id:"mobile_back",onClick:function(){d(!1),u(!1)},children:Object(l.jsx)("p",{children:"Back to results"})})]})})},E=function(){var e=f(),t=e.artistDetails,r=e.setToggleProfile,n=e.setToggleSidebar;return Object(l.jsxs)("div",{id:"artist_info",children:[Object(l.jsx)("div",{className:"close",children:Object(l.jsx)(N.a,{onClick:function(){return n(!1),void r(!1)},children:"X"})}),Object(l.jsx)("div",{className:"content",children:x.a.isEmpty(t)?"Nothing to see here until you search for something":Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("h3",{children:null===t||void 0===t?void 0:t.name}),Object(l.jsx)("p",{children:null===t||void 0===t?void 0:t.profile}),Object(l.jsx)("a",{href:null===t||void 0===t?void 0:t.uri,target:"_blank",rel:"noreferrer",children:"Check out the rest of the "+(null===t||void 0===t?void 0:t.name)+" profile from Discogs"})]})})]})},A=function(){var e=f(),t=e.togglePlayer,r=e.toggleProfile,n=e.toggleSidebar,s=e.currentSong,a=e.displayNoTracksMessage,c=e.setDisplayNoTracksMessage;return Object(l.jsxs)("aside",{id:"album_player_section",className:n?"":"hidden",children:[(null===s||void 0===s?void 0:s.preview_url)?t&&Object(l.jsx)(P,{}):Object(l.jsxs)("div",{className:"no_tracks"+(a?"":" hidden"),children:[Object(l.jsx)("div",{className:"close",children:Object(l.jsx)(N.a,{onClick:function(){c(!1)},children:"X"})}),"Sorry can't find preview tracks available for this artist right now. Please try again, check out their profile or select a new artist."]}),r&&Object(l.jsx)(E,{})]})},D=function(){var e=f(),t=e.totalArtists,r=e.getSongs,n=e.getArtistDiscogs,s=e.setToggleSearchResultsView,a=e.songs,c=e.setToggleSearchResults,i=e.setTogglePlayer;return Object(l.jsxs)("div",{id:"search_results",children:[Object(l.jsx)("h2",{children:"Search Results"}),Object(l.jsx)("p",{children:"Please choose an option from the following:"}),Object(l.jsx)("ul",{children:x.a.isEmpty(t)?"Sorry there was a problem. Please try again":null===t||void 0===t?void 0:t.map((function(e,t){return Object(l.jsx)("li",{className:"result",onClick:function(){return t=null===e||void 0===e?void 0:e.name,o=null===e||void 0===e?void 0:e.id,i(!1),r(o).then(n(t)),!x.a.isEmpty(a)&&c(!0),void s(!1);var t,o},children:null===e||void 0===e?void 0:e.name},t)}))})]})},I=r(62),M=r(63),V=function(e){var t=e.songData,r=e.index,n=f(),s=n.setCurrentSong,a=n.setTogglePlayer,c=n.setToggleSidebar,u=n.setSongIndex,d=n.setDisplayNoTracksMessage;return Object(l.jsxs)(I.a,{as:"li",className:"tracks",children:[Object(l.jsx)(M.a,{xs:8,xl:11,children:null===t||void 0===t?void 0:t.name}),Object(l.jsx)(M.a,{className:"d-flex flex-row-reverse",children:Object(l.jsx)("button",{onClick:function(){s(t),c(!0),u(r),d(!0),a(!0)},id:"play_buttons",children:Object(l.jsx)(i.a,{icon:o.e})})})]})},B=function(e){var t=e.songs;return Object(l.jsx)("div",{id:"song_list",children:Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)("h2",{children:"Top Songs"}),Object(l.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(l.jsx)(V,{songData:e,index:t},t)}))})]})})},R=function(){var e=f(),t=e.songs,r=e.toggleSearchResultsView;return Object(l.jsxs)("section",{className:"searchContainer",children:[r&&Object(l.jsx)(D,{}),!x.a.isEmpty(t)&&Object(l.jsx)(B,{songs:t||[]})]})},z=r(64),F=function(){return Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(m,{children:Object(l.jsx)(z.a,{fluid:!0,children:Object(l.jsxs)(I.a,{id:"content_wrap",children:[Object(l.jsx)(M.a,{xs:12,md:7,lg:7,xl:7,children:Object(l.jsxs)(k,{children:[Object(l.jsx)(T,{}),Object(l.jsx)(R,{})]})}),Object(l.jsx)(M.a,{className:"sidebar_container",xs:12,md:5,lg:5,xl:5,children:Object(l.jsx)(A,{})}),Object(l.jsx)(C,{})]})})})})};r(60);c.a.render(Object(l.jsx)(F,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.0a9b0b90.chunk.js.map