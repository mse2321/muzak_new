(this.webpackJsonpmuzak_new=this.webpackJsonpmuzak_new||[]).push([[0],{61:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(29),c=r.n(s),o=r(9),i=r(10),l=r(0),u=function(){return Object(l.jsxs)("section",{className:"error_view",children:[Object(l.jsx)(o.a,{icon:i.a}),Object(l.jsxs)("p",{children:[Object(l.jsxs)("span",{className:"opps",children:["Opps!",Object(l.jsx)("br",{})]}),Object(l.jsxs)("span",{children:["Something went wrong.",Object(l.jsx)("br",{}),"Please try again."]})]})]})},d=r(13),j=r(3),p=function(e,t){switch(t.type){case"set_total_artists":return Object(j.a)(Object(j.a)({},e),{},{totalArtists:t.payload});case"set_token":return Object(j.a)(Object(j.a)({},e),{},{token:t.payload});case"set_songs":return Object(j.a)(Object(j.a)({},e),{},{songs:t.payload});case"set_artist_details":return Object(j.a)(Object(j.a)({},e),{},{artistDetails:t.payload});case"set_current_song":return Object(j.a)(Object(j.a)({},e),{},{currentSong:t.payload});case"set_song_index":return Object(j.a)(Object(j.a)({},e),{},{songIndex:t.payload});case"toggle_player":return Object(j.a)(Object(j.a)({},e),{},{togglePlayer:t.payload});case"toggle_search_results":return Object(j.a)(Object(j.a)({},e),{},{toggleSearchResults:t.payload});case"toggle_profile":return Object(j.a)(Object(j.a)({},e),{},{toggleProfile:t.payload});case"toggle_search_results_view":return Object(j.a)(Object(j.a)({},e),{},{toggleSearchResultsView:t.payload});case"toggle_sidebar":return Object(j.a)(Object(j.a)({},e),{},{toggleSidebar:t.payload});case"toggle_display_no_tracks_message":return Object(j.a)(Object(j.a)({},e),{},{displayNoTracksMessage:t.payload});case"toggle_error_view":return Object(j.a)(Object(j.a)({},e),{},{showErrorView:t.payload});default:throw new Error}},b=Object(n.createContext)({}),h=function(){return Object(n.useContext)(b)},g=function(e){var t=e.children,r=Object(n.useReducer)(p,{searchTerm:"",songs:[],artistDetails:{},currentSong:{},totalArtists:[],togglePlayer:!1,toggleSearchResults:!1,toggleProfile:!1,toggleSearchResultsView:!1,toggleSidebar:!1,songIndex:null,displayNoTracksMessage:!0,showErrorView:!1,token:""}),a=Object(d.a)(r,2),s=a[0],c=a[1];return Object(l.jsx)(b.Provider,{value:{state:s,dispatch:c},children:t})},O=function(e){return{type:"set_current_song",payload:e}},v=function(e){return{type:"set_song_index",payload:e}},x=function(e){return{type:"toggle_display_no_tracks_message",payload:e}},f=function(e){return{type:"toggle_sidebar",payload:e}},m=function(e){return{type:"toggle_player",payload:e}},y=function(e){return{type:"toggle_profile",payload:e}},_=function(e){return{type:"toggle_error_view",payload:e}},k=function(e){return{type:"toggle_search_results_view",payload:e}},w=function(){var e=h().dispatch;return Object(l.jsx)("div",{className:"info",children:Object(l.jsx)(o.a,{type:"button",icon:i.b,onClick:function(){return e(f(!0)),e(x(!1)),void e(y(!0))}})})},N=function(){var e,t=h().state;return Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"Muzak"}),Object(l.jsxs)("p",{children:["Listen to available preview tracks from your favorite artists using ",Object(l.jsx)("a",{href:"https://www.spotify.com",target:"_blank",rel:"noopener noreferrer",children:"Spotify"})," and artist information from ",Object(l.jsx)("a",{href:"https://www.discogs.com/",target:"_blank",rel:"noopener noreferrer",children:"Discogs"}),"."]}),Object(l.jsx)(w,{}),Object(l.jsx)("audio",{id:"music",src:null===(e=t.currentSong)||void 0===e?void 0:e.preview_url})]})},S=r(12),D=r.n(S),E=r(14),C=r(15),M=r.n(C),P=r(11),A=r.n(P),T=function(){var e=Object(E.a)(D.a.mark((function e(t){var r,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Basic OGRmYzM2YmU3ZDg5NGUxMjlkYmNiOTk3Njk2YWQ2Mjg6NGVmNzEyNmNlNDE0NGRhZGFkODhiNDk2ZjM4NDllMDA",r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic OGRmYzM2YmU3ZDg5NGUxMjlkYmNiOTk3Njk2YWQ2Mjg6NGVmNzEyNmNlNDE0NGRhZGFkODhiNDk2ZjM4NDllMDA"},"https://accounts.spotify.com/api/token","grant_type=client_credentials",e.prev=4,e.next=7,M.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",{headers:r});case 7:n=e.sent,t({type:"set_token",payload:n.data.access_token}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),t(_(!0)),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(E.a)(D.a.mark((function e(t,r,n){var a,s,c,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="Bearer "+r.token,s={"Content-Type":"application/x-www-form-urlencoded",Authorization:a},o=(c={url:"https://api.spotify.com/v1/search?",q:t,type:"artist"}).url+"q="+c.q+"&type="+c.type,A.a.isEmpty(r.token)){e.next=18;break}return e.prev=5,e.next=8,M.a.get(o,{headers:s});case 8:i=e.sent,n({type:"set_total_artists",payload:i.data.artists.items}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),n(_(!0)),console.error(e.t0);case 16:e.next=19;break;case 18:console.log("problem with token for search");case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(E.a)(D.a.mark((function e(t,r,n){var a,s,c,o,i,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="Bearer "+r.token,s={"Content-Type":"application/x-www-form-urlencoded",Authorization:a},"https://api.spotify.com/v1/artists/",c="https://api.spotify.com/v1/artists/"+t+"/top-tracks?market=US",A.a.isEmpty(r.token)||"none"===t){e.next=20;break}return e.prev=5,e.next=8,M.a.get(c,{headers:s});case 8:o=e.sent,i=o.data.tracks,l=i.filter((function(e){return!A.a.isEmpty(null===e||void 0===e?void 0:e.preview_url)})),n({type:"set_songs",payload:l}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),n(_(!0)),console.error(e.t0);case 18:e.next=21;break;case 20:console.log("problem with token for songs");case 21:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,r,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(E.a)(D.a.mark((function e(t,r){var n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.discogs.com/artists/",n="https://api.discogs.com/artists/"+t,e.prev=2,e.next=5,M.a.get(n);case 5:a=e.sent,r({type:"set_artist_details",payload:a.data}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),r(_(!0)),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(E.a)(D.a.mark((function e(t,r){var n,a,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.discogs.com/database/search?",n="https://api.discogs.com/database/search?"+("q="+t+"&type=artist&token=HXVjrLeEQhrviqTAitfJKDfwIvBMFImseaHzNnyI"),e.prev=3,e.next=6,M.a.get(n);case 6:a=e.sent,s=null===a||void 0===a?void 0:a.data.results[0].id,G(s.toString(),r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),r(_(!0)),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,r){return e.apply(this,arguments)}}(),B=function(e){var t=e.children,r=h(),s=r.state,c=r.dispatch;return Object(n.useEffect)((function(){T(c)}),[c]),Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)(N,{}),t,s.toggleErrorView&&Object(l.jsx)(u,{})]})},V=r(66),Y=r(67),F=r(68),Z=function(){var e=h(),t=e.state,r=e.dispatch,a=Object(n.useState)(""),s=Object(d.a)(a,2),c=s[0],o=s[1];return Object(l.jsxs)(V.a,{id:"search_form",children:[Object(l.jsx)(Y.a,{placeholder:"Search for something?!","aria-label":"SearchBar","aria-describedby":"search",onChange:function(e){return function(e){r(_(!1));var t=e.target.value;o(t)}(e)}}),Object(l.jsx)(V.a.Append,{children:Object(l.jsx)(F.a,{type:"submit",id:"submit",onClick:function(){t.displayNoTracksMessage&&r(x(!1)),z(c,t,r),r(k(!0))},children:"Search"})})]})},q=function(){var e=(new Date).getFullYear();return Object(l.jsx)("footer",{children:Object(l.jsxs)("small",{children:["\xa9",e,Object(l.jsx)("a",{href:"http://www.meinnovation.net",target:"_blank",rel:"noopener noreferrer",children:"ME Innovation"})]})})},U=function(){var e,t,r,s,c,u,j=h(),p=j.state,b=j.dispatch,g=document.getElementById("music"),x=Object(n.useState)("pause"),y=Object(d.a)(x,2),_=y[0],k=y[1],w=Object(n.useState)(!1),N=Object(d.a)(w,2),S=N[0],D=N[1];Object(n.useEffect)((function(){var e;null===g||void 0===g||g.setAttribute("src",null===(e=p.currentSong)||void 0===e?void 0:e.preview_url)}),[g,p.currentSong]);return Object(l.jsx)("div",{className:"audioPlayer_container",children:Object(l.jsxs)("div",{id:"audioPlayer",children:[Object(l.jsx)("img",{className:"album_art",src:null===(e=p.currentSong)||void 0===e||null===(t=e.album)||void 0===t||null===(r=t.images[0])||void 0===r?void 0:r.url,alt:""}),Object(l.jsx)("div",{id:"song_name_display",children:S?"Something went wrong. Please try again.":Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)("p",{className:"artist_name",children:null===(s=p.currentSong)||void 0===s?void 0:s.name}),Object(l.jsx)("p",{className:"album",children:null===(c=p.currentSong)||void 0===c||null===(u=c.album)||void 0===u?void 0:u.name})]})}),Object(l.jsx)("div",{id:"controls_wrap",children:Object(l.jsxs)("div",{id:"audio_controls",children:[Object(l.jsx)(o.a,{icon:i.f,id:"previous_song",role:"button",className:"previous_song"===_?"active_player_button":"",onClick:function(){return function(e){k(e);var t=p.songIndex-1,r=p.songs&&p.songs[t];b(O(r)),b(v(t))}("previous_song")}}),Object(l.jsx)(o.a,{icon:i.d,id:"play",role:"button",className:"play"===_?"active_player_button":"",onClick:function(){return k("play"),D(!g),void(null===g||void 0===g||g.play())}}),Object(l.jsx)(o.a,{icon:i.c,id:"pause",role:"button",className:"pause"===_?"active_player_button":"",onClick:function(){return k("pause"),void(null===g||void 0===g||g.pause())}}),Object(l.jsx)(o.a,{icon:i.g,id:"next_song",role:"button",className:"next_song"===_?"active_player_button":"",onClick:function(){return function(e){k(e);var t=p.songIndex+1,r=p.songs&&p.songs[t];b(O(r)),b(v(t))}("next_song")}})]})}),Object(l.jsx)("button",{id:"mobile_back",onClick:function(){b(f(!1)),b(m(!1))},children:Object(l.jsx)("p",{children:"Back to results"})})]})})},J=function(){var e,t,r,n,s=h(),c=s.state,o=s.dispatch;return Object(l.jsxs)("div",{id:"artist_info",children:[Object(l.jsx)("div",{className:"close",children:Object(l.jsx)(F.a,{onClick:function(){o(y(!1))},children:"X"})}),Object(l.jsx)("div",{className:"content",children:A.a.isEmpty(c.artistDetails)?"Nothing to see here until you search for something":Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)("h3",{children:null===(e=c.artistDetails)||void 0===e?void 0:e.name}),Object(l.jsx)("p",{children:null===(t=c.artistDetails)||void 0===t?void 0:t.profile}),Object(l.jsx)("a",{href:null===(r=c.artistDetails)||void 0===r?void 0:r.uri,target:"_blank",rel:"noreferrer",children:"Check out the rest of the "+(null===(n=c.artistDetails)||void 0===n?void 0:n.name)+" profile from Discogs"})]})})]})},Q=function(){var e,t=h(),r=t.state,n=t.dispatch;return Object(l.jsxs)("aside",{id:"album_player_section",className:r.toggleSidebar?"":"hidden",children:[(null===(e=r.currentSong)||void 0===e?void 0:e.preview_url)?r.togglePlayer&&Object(l.jsx)(U,{}):Object(l.jsxs)("div",{className:"no_tracks"+(r.displayNoTracksMessage?"":" hidden"),children:[Object(l.jsx)("div",{className:"close",children:Object(l.jsx)(F.a,{onClick:function(){n(x(!1))},children:"X"})}),"Sorry can't find preview tracks available for this artist right now. Please try again, check out their profile or select a new artist."]}),r.toggleProfile&&Object(l.jsx)(J,{})]})},X=function(){var e,t=h(),r=t.state,n=t.dispatch;return Object(l.jsxs)("div",{id:"search_results",children:[Object(l.jsx)("h2",{children:"Search Results"}),Object(l.jsx)("p",{children:"Please choose an option from the following:"}),Object(l.jsx)("ul",{children:A.a.isEmpty(r.totalArtists)?"Sorry there was a problem. Please try again":null===(e=r.totalArtists)||void 0===e?void 0:e.map((function(e,t){return Object(l.jsx)("li",{className:"result",onClick:function(){return t=null===e||void 0===e?void 0:e.name,a=null===e||void 0===e?void 0:e.id,n(m(!1)),R(a,r,n),I(t,n),!A.a.isEmpty(r.songs)&&n({type:"toggle_search_results",payload:!0}),void n(k(!1));var t,a},children:null===e||void 0===e?void 0:e.name},t)}))})]})},H=r(63),L=r(64),W=function(e){var t=e.songData,r=e.index,n=h().dispatch;return Object(l.jsxs)(H.a,{as:"li",className:"tracks",children:[Object(l.jsx)(L.a,{xs:8,xl:11,children:null===t||void 0===t?void 0:t.name}),Object(l.jsx)(L.a,{className:"d-flex flex-row-reverse",children:Object(l.jsx)("button",{onClick:function(){n(O(t)),n(f(!0)),n(v(r)),n(x(!1)),n(m(!0))},id:"play_buttons",children:Object(l.jsx)(o.a,{icon:i.e})})})]})},K=function(e){var t=e.songs;return Object(l.jsx)("div",{id:"song_list",children:Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)("h2",{children:"Top Songs"}),Object(l.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(l.jsx)(W,{songData:e,index:t},t)}))})]})})},$=function(){var e=h().state;return Object(l.jsxs)("section",{className:"searchContainer",children:[e.toggleSearchResultsView&&Object(l.jsx)(X,{}),!A.a.isEmpty(e.songs)&&Object(l.jsx)(K,{songs:e.songs?e.songs:[]})]})},ee=r(65),te=function(){return Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(g,{children:Object(l.jsx)(ee.a,{fluid:!0,children:Object(l.jsxs)(H.a,{id:"content_wrap",children:[Object(l.jsx)(L.a,{xs:12,md:7,lg:7,xl:7,children:Object(l.jsxs)(B,{children:[Object(l.jsx)(Z,{}),Object(l.jsx)($,{})]})}),Object(l.jsx)(L.a,{className:"sidebar_container",xs:12,md:5,lg:5,xl:5,children:Object(l.jsx)(Q,{})}),Object(l.jsx)(q,{})]})})})})};r(61);c.a.render(Object(l.jsx)(te,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.321caaf0.chunk.js.map